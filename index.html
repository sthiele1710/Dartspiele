<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WG Darts</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WG Darts">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">

    <style>
        body { margin: 0; font-family: sans-serif; background: #121212; color: white; text-align: center; -webkit-tap-highlight-color: transparent; padding-bottom: 20px;}
        
        .tab-nav { display: flex; background: #1f1f1f; position: sticky; top: 0; z-index: 10; border-bottom: 1px solid #333; }
        .tab-nav button { flex: 1; padding: 15px; border: none; background: none; color: #888; font-size: 16px; cursor: pointer; font-weight: bold; }
        .tab-nav button.active { color: gold; border-bottom: 3px solid gold; }
        
        .content { padding: 20px; display: none; }
        .content.active { display: block; }
        
        input { width: 80%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: white; font-size: 16px; text-align: center; }
        
        /* Buttons fÃ¼r die Spiele */
        .menu-btn { 
            display: flex; justify-content: space-between; align-items: center;
            background: #2a2a2a; color: white; text-decoration: none; 
            padding: 20px; margin: 15px auto; border-radius: 12px; 
            border-left: 8px solid gold; font-weight: bold; font-size: 18px;
            transition: transform 0.1s, background 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .menu-btn:active { transform: scale(0.98); background: #333; }
        .icon { font-size: 20px; color: #666; }

        /* Style fÃ¼r den Turnier Button */
        .tournament-btn {
            border-left-color: gold; 
            background: linear-gradient(90deg, #332b00 0%, #2a2a2a 100%);
            margin-top: 30px;
        }

        /* Tabelle */
        table { width: 100%; margin-top: 20px; border-collapse: collapse; font-size: 13px; }
        th, td { padding: 10px 5px; border-bottom: 1px solid #333; text-align: center; }
        td:first-child, th:first-child { text-align: left; padding-left: 10px;}
        th { color: gold; }
        .num { font-weight: bold; color: #ddd; }
    </style>
</head>
<body>

    <div class="tab-nav">
        <button id="btn-games" class="active" onclick="showTab('games')">Spiele</button>
        <button id="btn-stats" onclick="showTab('stats')">Bestenliste</button>
    </div>

    <div id="games" class="content active">
        <h1 style="color:gold; margin-top:0;">ğŸ® Spiele wÃ¤hlen</h1>
        
        <input type="text" id="p1Name" placeholder="Name Spieler 1" oninput="saveNames()">
        <input type="text" id="p2Name" placeholder="Name Spieler 2" oninput="saveNames()">
        
        <div style="margin-top: 20px;">
            <a href="x01.html" class="menu-btn" style="border-left-color: #00ff00;">
                <span>ğŸ’¯ X01 (501 / 301)</span> <span class="icon">â¯</span>
            </a>

            <a href="cricket.html" class="menu-btn" style="border-left-color: #d500f9;">
                <span>ğŸ¦— Cricket</span> <span class="icon">â¯</span>
            </a>

            <a href="domination.html" class="menu-btn" style="border-left-color: #ff3b3b;">
                <span>ğŸ¯ Domination</span> <span class="icon">â¯</span>
            </a>
            
            <a href="tictactoe.html" class="menu-btn" style="border-left-color: #00bfff;">
                <span>âŒ Tic Tac Toe</span> <span class="icon">â¯</span>
            </a>
            
            <a href="tournament.html" class="menu-btn tournament-btn">
                <span>ğŸ† Turnier Modus</span> <span class="icon">â¯</span>
            </a>
        </div>
    </div>

    <div id="stats" class="content">
        <h1 style="color:gold; margin-top:0;">ğŸ† All-Time Siege</h1>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>ğŸ’¯</th> <th>ğŸ¦—</th> <th>ğŸ¯</th> <th>âŒ</th> </tr>
            </thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <button onclick="clearStats()" style="margin-top:30px; background:none; border:none; color:#555; font-size:12px; padding: 20px; width:100%;">Statistiken zurÃ¼cksetzen</button>
    </div>

    <script>
        function showTab(tabId) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-nav button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.getElementById('btn-' + tabId).classList.add('active');
            if(tabId === 'stats') renderLeaderboard();
        }

        function saveNames() {
            localStorage.setItem('dart_p1', document.getElementById('p1Name').value);
            localStorage.setItem('dart_p2', document.getElementById('p2Name').value);
        }

        window.onload = () => {
            if(localStorage.getItem('dart_p1')) document.getElementById('p1Name').value = localStorage.getItem('dart_p1');
            if(localStorage.getItem('dart_p2')) document.getElementById('p2Name').value = localStorage.getItem('dart_p2');
        };

        function renderLeaderboard() {
            const stats = JSON.parse(localStorage.getItem('allTimeStats') || '{}');
            const entries = Object.entries(stats);
            
            // Sortieren nach Gesamt-Siegen (Alle Spiele zusammenzÃ¤hlen)
            entries.sort((a, b) => {
                const dataA = typeof a[1] === 'number' ? {dart: a[1]} : a[1];
                const dataB = typeof b[1] === 'number' ? {dart: b[1]} : b[1];

                const totalA = (dataA.x01 || 0) + (dataA.cricket || 0) + (dataA.dart || 0) + (dataA.ttt || 0);
                const totalB = (dataB.x01 || 0) + (dataB.cricket || 0) + (dataB.dart || 0) + (dataB.ttt || 0);
                
                return totalB - totalA;
            });

            const body = document.getElementById('leaderboard-body');
            body.innerHTML = entries.map(([name, rawData]) => {
                // Fallback fÃ¼r alte Datenstruktur
                const data = typeof rawData === 'number' ? { dart: rawData } : rawData;
                
                return `<tr>
                    <td>${name}</td>
                    <td class="num">${data.x01 || 0}</td>
                    <td class="num">${data.cricket || 0}</td>
                    <td class="num">${data.dart || 0}</td>
                    <td class="num">${data.ttt || 0}</td>
                </tr>`;
            }).join('');
        }

        function clearStats() {
            if(confirm("Wirklich alle Statistiken lÃ¶schen?")) {
                localStorage.removeItem('allTimeStats');
                renderLeaderboard();
            }
        }
    </script>
</body>
</html>
