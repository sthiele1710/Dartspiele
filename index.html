<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WG Darts</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WG Darts">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">

    <style>
        body { margin: 0; font-family: sans-serif; background: #121212; color: white; text-align: center; -webkit-tap-highlight-color: transparent; }
        .tab-nav { display: flex; background: #1f1f1f; position: sticky; top: 0; z-index: 10; }
        .tab-nav button { flex: 1; padding: 15px; border: none; background: none; color: #888; font-size: 16px; cursor: pointer; }
        .tab-nav button.active { color: gold; border-bottom: 3px solid gold; }
        .content { padding: 20px; display: none; }
        .content.active { display: block; }
        
        input { width: 80%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: white; font-size: 16px; text-align: center; }
        
        .menu-btn { 
            display: flex; justify-content: space-between; align-items: center;
            background: #2a2a2a; color: white; text-decoration: none; 
            padding: 20px; margin: 15px auto; border-radius: 12px; 
            border-left: 8px solid gold; font-weight: bold; font-size: 18px;
            transition: transform 0.1s;
        }
        .menu-btn:active { transform: scale(0.98); background: #333; }
        .icon { font-size: 20px; color: #666; }

        table { width: 100%; margin-top: 20px; border-collapse: collapse; font-size: 14px; }
        th, td { padding: 12px; border-bottom: 1px solid #333; text-align: left; }
        th { color: gold; }
        .num { text-align: center; }
    </style>
</head>
<body>

    <div class="tab-nav">
        <button id="btn-games" class="active" onclick="showTab('games')">Spiele</button>
        <button id="btn-stats" onclick="showTab('stats')">Bestenliste</button>
    </div>

    <div id="games" class="content active">
        <h1>üéÆ Spiele w√§hlen</h1>
        <input type="text" id="p1Name" placeholder="Name Spieler 1" oninput="saveNames()">
        <input type="text" id="p2Name" placeholder="Name Spieler 2" oninput="saveNames()">
        
        <div style="margin-top: 30px;">
            <a href="domination.html" class="menu-btn" style="border-color: #ff3b3b;">
                <span>üéØ Domination</span> <span class="icon">‚ùØ</span>
            </a>
            <a href="tictactoe.html" class="menu-btn" style="border-color: #00bfff;">
                <span>‚ùå Tic Tac Toe</span> <span class="icon">‚ùØ</span>
            </a>
            
            <a href="tournament.html" class="menu-btn" style="border-color: gold; background: #332b00;">
                <span>üèÜ Turnier Modus</span> <span class="icon">‚ùØ</span>
            </a>
        </div>
    </div>

    <div id="stats" class="content">
        <h1>üèÜ All-Time Siege</h1>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th class="num">üéØ Dom.</th>
                    <th class="num">‚ùå TTT</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <button onclick="clearStats()" style="margin-top:30px; background:none; border:none; color:#555; font-size:12px; padding: 20px;">Statistiken zur√ºcksetzen</button>
    </div>

    <script>
        function showTab(tabId) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-nav button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.getElementById('btn-' + tabId).classList.add('active');
            if(tabId === 'stats') renderLeaderboard();
        }

        function saveNames() {
            localStorage.setItem('dart_p1', document.getElementById('p1Name').value);
            localStorage.setItem('dart_p2', document.getElementById('p2Name').value);
        }

        window.onload = () => {
            if(localStorage.getItem('dart_p1')) document.getElementById('p1Name').value = localStorage.getItem('dart_p1');
            if(localStorage.getItem('dart_p2')) document.getElementById('p2Name').value = localStorage.getItem('dart_p2');
        };

        function renderLeaderboard() {
            const stats = JSON.parse(localStorage.getItem('allTimeStats') || '{}');
            const entries = Object.entries(stats);
            
            entries.sort((a, b) => {
                const totalA = ((typeof a[1] === 'number' ? a[1] : a[1].dart) || 0) + (a[1].ttt || 0);
                const totalB = ((typeof b[1] === 'number' ? b[1] : b[1].dart) || 0) + (b[1].ttt || 0);
                return totalB - totalA;
            });

            const body = document.getElementById('leaderboard-body');
            body.innerHTML = entries.map(([name, data]) => {
                const dScore = (typeof data === 'number') ? data : (data.dart || 0);
                const tScore = data.ttt || 0;
                return `<tr><td>${name}</td><td class="num">${dScore}</td><td class="num">${tScore}</td></tr>`;
            }).join('');
        }

        function clearStats() {
            if(confirm("Wirklich alles l√∂schen?")) {
                localStorage.removeItem('allTimeStats');
                renderLeaderboard();
            }
        }
    </script>
</body>
</html>
